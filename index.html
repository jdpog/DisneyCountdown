<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DVC Countdown</title>

  <!-- Disney-style font -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;900&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #0b0d10;
      --card: #ffffff;
      --digit: #0f3a66;
      --divider: #999;
      --radius: 22px;
    }

    * { box-sizing: border-box; }
    html, body {
      height: 100%; margin: 0;
      font-family: 'Nunito', system-ui, sans-serif;
      background: var(--bg); color: #fff;
      display: grid; place-items: center;
    }

    .frame {
      width: 100%; height: 100%;
      display: grid; place-items: center;
      padding: 6%;
    }

    .panel {
      width: 100%; height: 100%;
      display: grid; place-items: center;
      text-align: center;
      position: relative;
    }

    .tiles {
      display: flex;
      gap: min(2.6%, 16px);
      align-items: stretch;
      justify-content: center;
      width: 100%; height: 100%;
      padding: min(6%, 28px);
    }

    .tile {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 8px 28px rgba(0, 0, 0, 0.45);
      flex: 1 1 auto;
      min-width: 0;
      position: relative;
      display: grid;
      place-items: center;
      padding: 0 0.08em;
    }

    .digit {
      color: var(--digit);
      font-weight: 900;
      line-height: 0.86;
      letter-spacing: -0.02em;
      font-size: 10px; /* will be resized in JS */
      position: relative;
      z-index: 1;
    }

    .tile::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 6%;
      right: 6%;
      height: 3px;
      background: var(--divider);
      transform: translateY(-50%);
      z-index: 2;
      opacity: 0.9;
    }

    .subtitle {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      font-size: 12px;
      opacity: 0.88;
      color: #e9f1ff;
    }

    .safe-circle { padding: 10%; }
    noscript { color: #fff; opacity: 0.8; }
  </style>
</head>
<body>
  <div class="frame" id="frame">
    <div class="panel" id="panel">
      <div class="tiles" id="tiles"></div>
      <div class="subtitle" id="subtitle">DAYS TO DISNEY</div>
    </div>
  </div>

  <noscript>Enable JavaScript to see the countdown.</noscript>

  <script>
    // Set your trip date here
    var TRIP_DATE = '2025-11-07';

    // Add safe padding for circle screens
    try {
      var nzxt = (window.nzxt && window.nzxt.v1) ? window.nzxt.v1 : {};
      if (nzxt.shape === 'circle') {
        document.getElementById('frame').classList.add('safe-circle');
      }
    } catch (e) { }

    // Days until
    function daysUntil(dateISO) {
      var now = new Date();
      var start = new Date(dateISO + 'T00:00:00');
      var ms = start.setHours(0, 0, 0, 0) - now.setHours(0, 0, 0, 0);
      var d = Math.ceil(ms / 86400000);
      return (d < 0) ? 0 : d;
    }

    // Render digit tiles
    function renderCountdown(days) {
      var tilesWrap = document.getElementById('tiles');
      tilesWrap.innerHTML = '';
      var s = String(days);
      for (var i = 0; i < s.length; i++) {
        var ch = s.charAt(i);
        if (ch < '0' || ch > '9') continue;
        var tile = document.createElement('div');
        tile.className = 'tile';
        var digit = document.createElement('div');
        digit.className = 'digit';
        digit.textContent = ch;
        tile.appendChild(digit);
        tilesWrap.appendChild(tile);
      }
      autoSizeDigits();
    }

    function autoSizeDigits() {
      var digits = document.querySelectorAll('.tile .digit');
      if (!digits.length) return;
      var container = document.getElementById('panel');
      var w = container.clientWidth, h = container.clientHeight;
      var cols = digits.length;
      var gap = Math.min(w * 0.026, 16);
      var sidePad = Math.min(w, h) * 0.12;
      var tileW = (w - (gap * (cols - 1)) - sidePad) / cols;
      var tileH = h - (Math.min(w, h) * 0.22);
      var base = Math.min(tileW, tileH);
      var size = Math.max(12, Math.floor(base * 0.72));
      for (var i = 0; i < digits.length; i++) {
        digits[i].style.fontSize = size + 'px';
      }
    }

    // Init
    var d = daysUntil(TRIP_DATE);
    renderCountdown(d);
    document.getElementById('subtitle').textContent = (d === 1 ? 'DAY' : 'DAYS') + ' TO DISNEY';
    window.addEventListener('resize', function () {
      setTimeout(autoSizeDigits, 40);
    });
  </script>
</body>
</html>
